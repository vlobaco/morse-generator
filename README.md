# Morse Code Audio Generator & Decoder

A Python console application that converts text to Morse code audio (MP3/WAV) and decodes Morse code audio files back to text.

## Features

### Encoder (morse_generator.py)
- Converts text to Morse code
- Generates audio with dots (short beeps) and dashes (long beeps)
- Supports letters, numbers, and common punctuation
- Exports to MP3 or WAV format
- Interactive console interface

### Decoder (morse_decoder.py)
- Decodes MP3 and WAV files containing Morse code audio
- **Auto-detects timing** - works with different speed Morse code
- Analyzes audio segments to detect dots and dashes
- Converts detected Morse code back to readable text
- Optionally saves decoded text to file

## Installation

1. Install the required dependencies:
```bash
pip install -r requirements.txt
```

2. Install ffmpeg (required by pydub for MP3 support; WAV works without it):
   - **macOS**: `brew install ffmpeg`
   - **Ubuntu/Debian**: `sudo apt-get install ffmpeg`
   - **Windows**: Download from https://ffmpeg.org/download.html

## Usage

### Encoder - Generate Morse Code Audio

#### Interactive Mode
```bash
python morse_generator.py
```
The program will prompt you for:
1. Text to convert
2. Output filename - can be .mp3 or .wav (optional, defaults to morse_output.mp3)

#### Command Line Mode
```bash
python morse_generator.py "Your text here"
```

### Decoder - Decode Morse Code Audio

#### Interactive Mode
```bash
python morse_decoder.py
```
The program will prompt you for:
1. Audio file to decode (.mp3 or .wav)
2. Whether to save decoded text to file

#### Command Line Mode
```bash
python morse_decoder.py morse_output.mp3
# or
python morse_decoder.py morse_output.wav
```

## Examples

### Encoding Examples
```bash
# Interactive mode (will prompt for format)
python morse_generator.py

# Command line with text (defaults to MP3)
python morse_generator.py "SOS"

# Command line with longer text
python morse_generator.py "Hello World"
# Then enter "message.wav" for WAV format output
# Or enter "message.mp3" for MP3 format output
```

### Decoding Examples
```bash
# Decode a file (interactive)
python morse_decoder.py

# Decode MP3 file (command line)
python morse_decoder.py morse_output.mp3

# Decode WAV file (command line)
python morse_decoder.py morse_output.wav

# Decode and save output
python morse_decoder.py my_message.mp3
# Then answer 'y' when prompted to save
```

### Full Workflow Examples

#### MP3 Workflow
```bash
# 1. Create a Morse code audio file
python morse_generator.py "HELLO WORLD"
# Output: morse_output.mp3

# 2. Decode it back to text
python morse_decoder.py morse_output.mp3
# Output: HELLO WORLD
```

#### WAV Workflow
```bash
# 1. Create a WAV Morse code audio file
python morse_generator.py "SOS"
# When prompted for filename, enter: distress.wav

# 2. Decode the WAV file
python morse_decoder.py distress.wav
# Output: SOS
```

## Supported Audio Formats

- **MP3**: Compressed format, smaller file size (requires ffmpeg)
- **WAV**: Uncompressed format, larger file size, no external dependencies needed

Both formats work identically for encoding and decoding. The format is automatically detected from the file extension.

## Morse Code Timing

### Encoder Timing (morse_generator.py)

The encoder generates audio with standard Morse code timing:
- Dot: 100ms
- Dash: 300ms (3x dot)
- Gap between symbols: 100ms
- Gap between letters: 300ms
- Gap between words: 700ms
- Frequency: 800 Hz

### Decoder Auto-Detection (morse_decoder.py)

The decoder **automatically detects timing** from the audio file, so it works with Morse code at any speed!

**How it works:**
1. **Analyzes audio segments** - Detects all tone and silence durations in the file
2. **Uses natural breaks algorithm** - Finds the largest gaps in the data to identify clusters
3. **Handles noise robustly** - Groups similar values together, ignoring small variations
4. **Works with multiple gap types** - Correctly identifies symbol/letter/word gaps even when there are 4+ unique silence durations

**What it detects:**
- Dot vs dash threshold (by finding the largest gap between short and long tones)
- Symbol gaps (short pauses within a letter)
- Letter gaps (medium pauses between letters)
- Word gaps (long pauses between words)

This means you can decode Morse code files generated by other tools, even if they use different timing than our encoder. The algorithm is robust to timing variations and audio noise.

### Analyzing Audio Files

Use the included `analyze_audio.py` utility to see detailed timing information about any Morse code audio file:

```bash
python analyze_audio.py morse.wav
```

This will show you the actual timing parameters and suggest appropriate thresholds.

## Supported Characters

- Letters: A-Z
- Numbers: 0-9
- Punctuation: . , ? ' ! / ( ) & : ; = + - _ " $ @
- Spaces (word separation)
